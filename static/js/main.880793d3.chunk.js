(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,c){e.exports={detailsContainer:"MovieDetails_detailsContainer__2HWcA",pictureBlock:"MovieDetails_pictureBlock__1P21w",dataBlock:"MovieDetails_dataBlock__krZ5f",generList:"MovieDetails_generList__2JuwP",poster:"MovieDetails_poster__cpS5S"}},13:function(e,t,c){e.exports={navLink:"Navigation_navLink__2GBUT",activeNavLink:"Navigation_activeNavLink__2Jl3b"}},17:function(e,t,c){e.exports={firstRenderList:"HomePage_firstRenderList__22Y8C",link:"HomePage_link__2EDkA"}},20:function(e,t,c){e.exports={Container:"Container_Container__3BstT"}},27:function(e,t,c){},35:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(19),s=c.n(a),i=c(12),o=c(5),r=(c(27),c(4)),l=c(2),j=c(20),u=c.n(j),d=c(0),p=function(e){var t=e.children;return Object(d.jsx)("div",{className:u.a.Container,children:t})},b=c(13),h=c.n(b),v=function(){return Object(d.jsxs)("nav",{children:[Object(d.jsx)(r.c,{to:"/",exact:!0,className:h.a.navLink,activeClassName:h.a.activeNavLink,children:"Homepage"}),Object(d.jsx)(r.c,{to:"/Movies",className:h.a.navLink,activeClassName:h.a.activeNavLink,children:"Movies"}),Object(d.jsx)("hr",{})]})},O="6e769984a853ea1bdeede26e9a1ea504",f="https://api.themoviedb.org/3/",x=c(17),m=c.n(x),y=function(e){var t=e.popMovies,c=e.dispatch,a=Object(n.useRef)(!0);return Object(n.useEffect)((function(){if(a.current)return c({type:"resetDetailsData"}),c({type:"setStatus",payload:"pending"}),fetch("".concat(f,"trending/all/day?api_key=").concat(O,"&language=en-US")).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){c({type:"setPopMovies",payload:e.results}),c({type:"setStatus",payload:"resolved"})})).catch((function(e){console.log(e)})),void(a.current=!1)})),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{children:"Trending today"}),Object(d.jsx)("ul",{className:m.a.firstRenderList,children:t.map((function(e){if(e.title)return Object(d.jsx)("li",{children:Object(d.jsx)(r.b,{to:"movies/".concat(e.id),className:m.a.link,children:e.title})},e.id)}))})]})},g=function(e){var t=e.onSubmit,c=e.inputText,n=e.handleInputChange;return Object(d.jsxs)("form",{onSubmit:t,children:[Object(d.jsx)("input",{type:"text",value:c,onChange:n}),Object(d.jsx)("button",{type:"submit",children:"Search"})]})},_=function(e){var t=e.movieList;return Object(d.jsx)("ul",{children:t.map((function(e){return Object(d.jsx)("li",{children:Object(d.jsx)(r.b,{to:"movies/".concat(e.id),children:e.title})},e.id)}))})},k=function(e){var t=e.state,c=t.status,a=t.movieList,s=e.dispatch,o=Object(n.useState)(""),r=Object(i.a)(o,2),l=r[0],j=r[1],u=Object(n.useState)(""),p=Object(i.a)(u,2),b=p[0],h=p[1],v=Object(n.useRef)(!0);Object(n.useEffect)((function(){if(v.current)return s({type:"resetDetailsData"}),void(v.current=!1);var e;s({type:"setStatus",payload:"pending"}),(e=b,fetch("".concat(f,"search/movie?api_key=").concat(O,"&query=").concat(e)).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){s({type:"setMovieList",payload:e.results}),s({type:"setStatus",payload:"resolved"})})).catch((function(e){s({type:"setStatus",payload:"rejected"}),console.log(e)}))}),[b,s]);var x=function(e){e.preventDefault(),h(l)},m=function(e){j(e.target.value)};return"idle"===c?Object(d.jsx)(g,{onSubmit:x,handleInputChange:m,inputText:l}):"pending"===c?Object(d.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):"resolved"===c?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(g,{onSubmit:x,handleInputChange:m,inputText:l}),Object(d.jsx)(_,{movieList:a})]}):void 0},w=c(10),S=c.n(w),D=function(e){var t=e.movieDetails,c=e.dateNormalizer;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:S.a.detailsContainer,children:[Object(d.jsxs)("div",{className:S.a.pictureBlock,children:[Object(d.jsx)(r.b,{to:"/",children:Object(d.jsx)("button",{type:"button",onClick:function(){},children:"Go back"})}),Object(d.jsx)("img",{src:"https://image.tmdb.org/t/p/w300".concat(t.poster_path,"?api_key=6e769984a853ea1bdeede26e9a1ea504"),alt:t.title,className:S.a.poster})]}),Object(d.jsxs)("div",{className:S.a.dataBlock,children:[Object(d.jsxs)("h1",{children:[t.title," (",c(t.release_date),")"]}),Object(d.jsxs)("p",{children:["User sorce: ",10*t.vote_average,"%"]}),Object(d.jsx)("h2",{children:"Overview"}),Object(d.jsx)("p",{children:t.overview}),Object(d.jsx)("h2",{children:"Geners"}),Object(d.jsx)("ul",{children:t.genres.map((function(e){return Object(d.jsx)("li",{className:S.a.generList,children:e.name},e.id)}))})]})]}),Object(d.jsx)("hr",{})]})},L=function(e){var t=e.state,c=(t.status,t.movieDetails),a=e.dispatch,s=Object(l.f)(),i=Object(n.useRef)(!0);Object(n.useEffect)((function(){if(i.current)return a({type:"setStatus",payload:"pending"}),(e=s.movieId,fetch("".concat(f,"movie/").concat(e,"?api_key=").concat(O)).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){a({type:"setMovieDetails",payload:e}),a({type:"setStatus",payload:"resolved"})})).catch((function(e){console.log(e)})),void(i.current=!1);var e}));return c&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(D,{movieDetails:c,dateNormalizer:function(e){return e.substring(0,4)}}),Object(d.jsx)("h3",{children:"Aditional information"}),Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)(r.b,{to:"/movies/".concat(s.movieId,"/Cast"),children:"Cast"})}),Object(d.jsx)("li",{children:Object(d.jsx)(r.b,{to:"/movies/".concat(s.movieId,"/Reviews"),children:"Reviws"})})]}),Object(d.jsx)("hr",{})]})},C=function(e){var t=e.state,c=t.cast,a=(t.status,e.dispatch),s=Object(n.useRef)(!0),i=Object(l.f)();return Object(n.useEffect)((function(){if(s.current)return a({type:"setStatus",payload:"pending"}),(e=i.movieId,fetch("".concat(f,"movie/").concat(e,"/credits?api_key=").concat(O)).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){a({type:"setCast",payload:e.cast}),a({type:"setStatus",payload:"resolved"})})).catch((function(e){console.log(e)})),void(s.current=!1);var e})),Object(d.jsx)("ul",{children:c.map((function(e){return Object(d.jsxs)("li",{children:[Object(d.jsxs)("h4",{children:[e.character,": ",e.name]}),Object(d.jsx)("img",{src:"https://image.tmdb.org/t/p/w300".concat(e.profile_path,"?api_key=6e769984a853ea1bdeede26e9a1ea504"),alt:"".concat(e.name)})]},e.id)}))})},N=function(e){var t=e.reviews;return Object(d.jsx)("ul",{children:t.map((function(e){return Object(d.jsxs)("li",{children:[Object(d.jsx)("h3",{children:e.author}),Object(d.jsx)("p",{children:e.content})]},e.id)}))})},M=function(){return Object(d.jsx)("p",{children:"We don't have any reviews for this movie"})},R=function(e){var t=e.state,c=t.reviews,a=(t.status,e.dispatch),s=Object(n.useRef)(!0),i=Object(l.f)();return Object(n.useEffect)((function(){if(s.current)return a({type:"setStatus",payload:"pending"}),(e=i.movieId,fetch("".concat(f,"movie/").concat(e,"/reviews?api_key=").concat(O)).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){a({type:"setReviews",payload:e.results}),a({type:"setStatus",payload:"resolved"})})).catch((function(e){console.log(e)})),void(s.current=!1);var e})),c[0]?Object(d.jsx)(N,{reviews:c}):Object(d.jsx)(M,{})},I={popMovies:[],movieList:[],status:"idle",movieDetails:null,cast:[],reviews:null};function B(e,t){switch(t.type){case"setStatus":return Object(o.a)(Object(o.a)({},e),{},{status:t.payload});case"setPopMovies":return Object(o.a)(Object(o.a)({},e),{},{popMovies:t.payload});case"setMovieList":return Object(o.a)(Object(o.a)({},e),{},{movieList:t.payload});case"setMovieDetails":return Object(o.a)(Object(o.a)({},e),{},{movieDetails:t.payload});case"setCast":return Object(o.a)(Object(o.a)({},e),{},{cast:t.payload});case"setReviews":return Object(o.a)(Object(o.a)({},e),{},{reviews:t.payload});case"resetDetailsData":return Object(o.a)(Object(o.a)({},e),{},{movieDetails:null,cast:[],reviews:[]});default:console.log("unexpected action type ".concat(t.type))}}var E=function(){var e=Object(n.useReducer)(B,I),t=Object(i.a)(e,2),c=t[0],a=t[1];return Object(d.jsx)(r.a,{children:Object(d.jsxs)(p,{children:[Object(d.jsx)(v,{}),Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{path:"/",exact:!0,children:Object(d.jsx)(y,{popMovies:c.popMovies,dispatch:a})}),Object(d.jsx)(l.a,{path:"/movies",exact:!0,children:Object(d.jsx)(k,{state:c,dispatch:a})}),Object(d.jsx)(l.a,{path:"/movies/:movieId",exact:!0,children:Object(d.jsx)(L,{state:c,dispatch:a})}),Object(d.jsxs)(l.a,{path:"/movies/:movieId/Cast",exact:!0,children:[Object(d.jsx)(L,{state:c,dispatch:a}),Object(d.jsx)(C,{state:c,dispatch:a})]}),Object(d.jsxs)(l.a,{path:"/movies/:movieId/Reviews",children:[Object(d.jsx)(L,{state:c,dispatch:a}),Object(d.jsx)(R,{state:c,dispatch:a})]}),Object(d.jsx)(l.a,{children:Object(d.jsx)(y,{})})]})]})})};c(34);s.a.render(Object(d.jsx)(E,{}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.880793d3.chunk.js.map